const i18n = {
    en: {
        navBtn: "Get API Key",
        heroBadge: "ğŸŒŸ NEW API RELEASE",
        heroTitle: "The ultimate <br><span class=\"gradient-text\">data refining</span> tool for RAG",
        heroSub: "Drop the noisy HTML. Convert any webpage into clean, LLM-friendly Markdown in 1 second.",
        heroCta: "Start on Apify Store",
        featTitle: "Why choose Universal Markdown API?",
        featDesc: "Providing an overwhelming pipeline experience to boost LLM performance.",
        feat1Title: "Pure Content Extraction",
        feat1Desc: "Automatically filters out ads, footers, navigation bars, and noisy elements intelligently to extract pure body content.",
        feat2Title: "RAG-Optimized URLs",
        feat2Desc: "Perfectly converts all relative paths and image sources to absolute URLs, preventing context and reference errors in LLMs.",
        feat3Title: "Zero-Cost Engine",
        feat3Desc: "Achieves extreme parsing speed utilizing Cheerio instead of heavy browsers that consume excess resources. Drastically cuts computing costs.",
        compTitle: "The Transformation",
        compDesc: "A chaotic DOM tree reborn as refined Markdown knowledge.",
        priceTitle: "Build your AI pipeline with unbeatable efficiency",
        priceDesc: "Forget opaque pricing. Pay only for what you use, at some of the lowest rates in the industry.",
        priceTier: "Developer API",
        priceStart: "Actor Start Cost: <strong>$0.01</strong>",
        priceData: "Data Processing: <strong>$0.50</strong> per 1,000 pages",
        pricePlatform: "Platform Fee: <strong>Free</strong>",
        priceCta: "Start Scraping Now",
        trustBadge: "Secure Payments Powered by",
        diveTitle: "Technical Deep Dive",
        diveDesc: "How did I build this RAG-Ready API?",
        diveCta: "Read the Devlog"
    },
    ko: {
        navBtn: "API Key ë°œê¸‰",
        heroBadge: "ğŸŒŸ NEW API RELEASE",
        heroTitle: "RAGë¥¼ ìœ„í•œ ê°€ì¥ <br><span class=\"gradient-text\">ì™„ë²½í•œ ë°ì´í„° ì •ì œ</span> ë„êµ¬",
        heroSub: "ë…¸ì´ì¦ˆ ê°€ë“í•œ HTMLì„ ë²„ë¦¬ì„¸ìš”. ì–´ë–¤ ì›¹í˜ì´ì§€ë“  LLMì´ ê°€ì¥ ì‚¬ë‘í•˜ëŠ” ê¹”ë”í•œ Markdownìœ¼ë¡œ 1ì´ˆ ë§Œì— ë³€í™˜í•©ë‹ˆë‹¤.",
        heroCta: "Apify ìŠ¤í† ì–´ì—ì„œ ë°”ë¡œ ì‹œì‘í•˜ê¸°",
        featTitle: "Why choose Universal Markdown API?",
        featDesc: "LLM ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ì••ë„ì ì¸ íŒŒì´í”„ë¼ì¸ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.",
        feat1Title: "ìˆœìˆ˜ ì½˜í…ì¸  ì¶”ì¶œ",
        feat1Desc: "ê´‘ê³ , í‘¸í„°, ë‚´ë¹„ê²Œì´ì…˜ ë°” ë“± ë¶ˆí•„ìš”í•œ ë…¸ì´ì¦ˆë¥¼ ìë™ìœ¼ë¡œ ì³ë‚´ê³  ìˆœìˆ˜í•œ ë³¸ë¬¸ ì½˜í…ì¸ ë§Œ ì§€ëŠ¥ì ìœ¼ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤.",
        feat2Title: "RAG ìµœì í™” URL ë³€í™˜",
        feat2Desc: "ëª¨ë“  ìƒëŒ€ ê²½ë¡œ ë§í¬ì™€ ì´ë¯¸ì§€ ì£¼ì†Œë¥¼ ì ˆëŒ€ ê²½ë¡œ(Absolute URL)ë¡œ ì™„ë²½í•˜ê²Œ ë³€í™˜í•˜ì—¬ LLMì˜ ë§¥ë½ íŒŒì•… ë° ì°¸ì¡° ì˜¤ë¥˜ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.",
        feat3Title: "Zero-Cost ì´ˆê³ ì† ì—”ì§„",
        feat3Desc: "ì´ˆê³¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì†Œëª¨í•˜ëŠ” ë¬´ê±°ìš´ ë¸Œë¼ìš°ì € ëŒ€ì‹  Cheerioë¥¼ í™œìš©í•´ ê·¹ê°•ì˜ íŒŒì‹± ì†ë„ë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤. ì»´í“¨íŒ… ë¹„ìš©ì„ ê·¹ë‹¨ì ìœ¼ë¡œ ë‚®ì¶¥ë‹ˆë‹¤.",
        compTitle: "ë°ì´í„° ë³€í™˜ ì‹œë®¬ë ˆì´ì…˜",
        compDesc: "ì–´ì§€ëŸ¬ìš´ DOM íŠ¸ë¦¬ê°€ ì •ê°ˆí•œ Markdown ì§€ì‹ìœ¼ë¡œ ì¬íƒ„ìƒí•©ë‹ˆë‹¤.",
        priceTitle: "ì••ë„ì ì¸ ê°€ì„±ë¹„ë¡œ AI íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ì„¸ìš”",
        priceDesc: "ë¶ˆíˆ¬ëª…í•œ ìš”ê¸ˆì œëŠ” ìŠìœ¼ì„¸ìš”. ì‚¬ìš©í•œ ë§Œí¼ë§Œ, ì—…ê³„ ìµœì € ìˆ˜ì¤€ìœ¼ë¡œ.",
        priceTier: "Developer API",
        priceStart: "ì´ˆê¸° ì‹¤í–‰ ë¹„ìš© (Actor Start): <strong>$0.01</strong>",
        priceData: "ë°ì´í„° ì²˜ë¦¬ ë¹„ìš©: 1,000í˜ì´ì§€ ë‹¹ <strong>$0.50</strong>",
        pricePlatform: "í”Œë«í¼ ì´ìš©ë£Œ: <strong>Free</strong>",
        priceCta: "ì§€ê¸ˆ ë°”ë¡œ í¬ë¡¤ë§ ì‹œì‘",
        trustBadge: "ì•ˆì „í•œ ê²°ì œ ì§€ì›",
        diveTitle: "ê¸°ìˆ ì  ì‹¬ì¸µ ë¶„ì„",
        diveDesc: "ì´ RAG ìµœì í™” APIë¥¼ ì–´ë–»ê²Œ ë§Œë“¤ì—ˆì„ê¹Œìš”?",
        diveCta: "ê°œë°œ ë¡œê·¸ ì½ê¸°"
    }
};

let currentLang = 'en';

document.addEventListener('DOMContentLoaded', () => {
    // 0. Language Toggle
    const langToggleBtn = document.getElementById('lang-toggle');
    langToggleBtn.addEventListener('click', () => {
        currentLang = currentLang === 'en' ? 'ko' : 'en';
        langToggleBtn.innerText = currentLang === 'en' ? 'KO' : 'EN';

        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            const isHtml = el.getAttribute('data-i18n-html') === 'true';
            if (i18n[currentLang][key]) {
                if (isHtml) {
                    el.innerHTML = i18n[currentLang][key];
                } else {
                    el.innerText = i18n[currentLang][key];
                }
            }
        });
    });

    // 1. Intersection Observer for Fade-in Animations
    const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.15
    };

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, observerOptions);

    const animatedElements = document.querySelectorAll('.fade-in-up');
    animatedElements.forEach(el => observer.observe(el));


    // 2. Simple Typing / Glitch effect for the Hero Code Block or "Before/After" Section
    const typeWriterElement = document.getElementById('typing-md');

    if (typeWriterElement) {
        const originalMarkdownText = typeWriterElement.innerText;

        const codeObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    typeWriterText(typeWriterElement, originalMarkdownText, 15);
                } else {
                    typeWriterElement.innerText = '';
                }
            });
        }, { threshold: 0.5 });

        typeWriterElement.innerText = '';
        codeObserver.observe(typeWriterElement);
    }

    function typeWriterText(element, text, speed) {
        element.innerText = '';
        let i = 0;
        element.classList.add('typing');

        function type() {
            if (i < text.length) {
                element.innerHTML += text.charAt(i) === '\n' ? '<br>' : text.charAt(i);
                i++;
                setTimeout(type, speed);
            } else {
                element.classList.remove('typing');
            }
        }

        type();
    }
});
